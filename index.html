<!DOCTYPE html>
<html lang="en">
	<head>
		<title>BeachesbyWill</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<script src="./lib/jquery.js"></script>
		<style>
			#blocker {
				position: absolute;
				width: 100%;
				height: 100%;
				background-color: rgba(0,0,0,0.5);
			}

			#instructions {
				width: 100%;
				height: 100%;

				display: -webkit-box;
				display: -moz-box;
				display: box;

				-webkit-box-orient: horizontal;
				-moz-box-orient: horizontal;
				box-orient: horizontal;

				-webkit-box-pack: center;
				-moz-box-pack: center;
				box-pack: center;

				-webkit-box-align: center;
				-moz-box-align: center;
				box-align: center;

				color: #ffffff;
				text-align: center;
				font-family: Arial;
				font-size: 14px;
				line-height: 24px;

				cursor: pointer;
			}

		</style>
	</head>
	<body>
		<div id="blocker">

			<div id="instructions">
				<span style="font-size:36px"></span>
				<br /><br />
				Move: WASD<br/>
				Jump: SPACE<br/>
				Look: MOUSE
			</div>
		</div>

		<script type="module">

			import * as THREE from './lib/three.module.js';

			import { PointerLockControls } from './js/PointerLockControls.js';


			import { GLTFLoader } from './lib/GLTFLoader.js';

			import { Sky } from './lib/Sky.js';

			const loader = new GLTFLoader();
     //text


const fontloader = new THREE.FontLoader();



		 //load logs
					THREE.DefaultLoadingManager.onStart = function ( url, itemsLoaded, itemsTotal ) {

					console.log( 'Started loading file: ' + url + '.\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );

					};




					THREE.DefaultLoadingManager.onProgress = function ( url, itemsLoaded, itemsTotal ) {
					$("#instructions span").text("Please wait while the Gallery Loads :)");
					console.log( 'Loading file: ' + url + '.\nLoaded ' + itemsLoaded + ' of ' + itemsTotal + ' files.' );

					};

					THREE.DefaultLoadingManager.onError = function ( url ) {

					console.log( 'There was an error loading ' + url );

					};
					let loaded = false;
					THREE.DefaultLoadingManager.onLoad = function ( ) {
						loaded = true;
						console.log( 'Loading Complete!');
						$("#instructions span").text("	Click to view gallery!");

					};

				//main right photo
				//modern pic frame
			loader.load(
				// resource URL
				'./textures/picture_frame_-_emapale_enmarcate/scene.gltf',
				// called when the resource is loaded
				function ( gltf ) {
					var mesh = gltf.scene; // THREE.Group
					mesh.position.set(100.5, -0.805, -3.18);
					mesh.scale.set(7, 7.9, 7.1)
					mesh.rotation.y = Math.PI;
					scene.add( gltf.scene );


				});


						//modern frame
				loader.load(
					'./textures/picture_frame_-_emapale_enmarcate/scene.gltf',
					function ( gltf ) {
						var mesh = gltf.scene; // THREE.Group
						mesh.position.set(2, 2, 58.5);
						mesh.scale.set(6, 6, 6)
						mesh.rotation.y = Math.PI / 2;
						scene.add( gltf.scene );


					});
					loader.load(
						'./textures/picture_frame_-_emapale_enmarcate/scene.gltf',
						function ( gltf ) {
							var mesh = gltf.scene; // THREE.Group
							mesh.position.set(25, 2, 58.5);
							mesh.scale.set(6, 6, 6)
							mesh.rotation.y = Math.PI / 2;
							scene.add( gltf.scene );


						});



					//house

					loader.load(
						// resource URL
						'./textures/vr_square_gallery_4k/scene.gltf',
						// called when the resource is loaded
						function ( gltf ) {
							var mesh = gltf.scene; // THREE.Group
							mesh.position.set(0, 1, 0);
							mesh.renderOrder = 0;
							mesh.scale.set(0.2, 0.2, 0.2)

							scene.add( gltf.scene );


						});







				loader.load(
							// resource URL
							'./textures/wall_frame_paspatur/scene.gltf',
							// called when the resource is loaded
							function ( gltf ) {
								var mesh = gltf.scene; // THREE.Group
								mesh.position.set(4, 15, -54);

								mesh.scale.set(5, 5, 5)

								scene.add( gltf.scene );


							});



								loader.load(
									// resource URL
									'./textures/wall_frame_paspatur/scene.gltf',
									// called when the resource is loaded
									function ( gltf ) {
										var mesh = gltf.scene; // THREE.Group
										mesh.position.set(15, 15, -54);

										mesh.scale.set(5, 5, 5)

										scene.add( gltf.scene );


									});
			//big wall drone shots
			loader.load(
				// resource URL
				'./textures/wall_frame_paspatur/scene.gltf',
				// called when the resource is loaded
				function ( gltf ) {
					var mesh = gltf.scene; // THREE.Group
					mesh.position.set(-34
						, 15, 1.5);
					mesh.rotation.y = Math.PI / 2;
					mesh.scale.set(6, 6, 6)

					scene.add( gltf.scene );


				});

				loader.load(
					// resource URL
					'./textures/wall_frame_paspatur/scene.gltf',
					// called when the resource is loaded
					function ( gltf ) {
						var mesh = gltf.scene; // THREE.Group
						mesh.position.set(-34
							, 15, 15);
						mesh.rotation.y = Math.PI / 2;
						mesh.scale.set(6, 6, 6)

						scene.add( gltf.scene );


					});

					loader.load(
						// resource URL
						'./textures/wall_frame_paspatur/scene.gltf',
						// called when the resource is loaded
						function ( gltf ) {
							var mesh = gltf.scene; // THREE.Group
							mesh.position.set(-34
								, 15, -12.3);
							mesh.rotation.y = Math.PI / 2;
							mesh.scale.set(6, 6, 6)

							scene.add( gltf.scene );


						});
						 //landscape back right frame
						loader.load(
							// resource URL
							'./textures/wall_frame_paspatur/scene.gltf',
							// called when the resource is loaded
							function ( gltf ) {
								var mesh = gltf.scene; // THREE.Group
								mesh.position.set(75, 15, 58.5);
								mesh.rotation.y = Math.PI;
								mesh.rotation.x = Math.PI * 2;
								mesh.rotation.z = Math.PI/2;
								mesh.scale.set(6, 9, 6)

								scene.add( gltf.scene );


							});


							loader.load(
								// resource URL
								'./textures/wall_frame_paspatur/scene.gltf',
								// called when the resource is loaded
								function ( gltf ) {
									var mesh = gltf.scene; // THREE.Group
									mesh.position.set(79, 15, -54.3);
									mesh.rotation.y = Math.PI;
									mesh.rotation.x = Math.PI;
									mesh.rotation.z = Math.PI/2;
									mesh.scale.set(7, 9, 2)

									scene.add( gltf.scene );


								});


			//vines
				loader.load(
				// resource URL
				'./textures/vines/scene.gltf',
				// called when the resource is loaded
				function ( gltf ) {
					var mesh = gltf.scene; // THREE.Group
					mesh.position.set(40, 43, -8.7);

					mesh.scale.set(0.25, 0.15, 0.15)

					scene.add( gltf.scene );


				});
			//props
				loader.load(
					// resource URL
					'./textures/s9_mini_drone/scene.gltf',
					// called when the resource is loaded
					function ( gltf ) {
						var mesh = gltf.scene; // THREE.Group
						mesh.position.set(-26, 5, 1);
						mesh.rotation.y = 1.2;
						mesh.scale.set(0.8, 0.8, 0.8)

						scene.add( gltf.scene );


					});


					loader.load(
						// resource URL
						'./textures/dslr_camera/scene.gltf',
						// called when the resource is loaded
						function ( gltf ) {
							var mesh = gltf.scene; // THREE.Group
							mesh.position.set(-20, 4, 1);
							mesh.rotation.y = 0.6;
							mesh.scale.set(0.2, 0.2, 0.2)

							scene.add( gltf.scene );


						});


						loader.load(
							// resource URL
							'./textures/gleason_ottoman/scene.gltf',
							// called when the resource is loaded
							function ( gltf ) {
								var mesh = gltf.scene; // THREE.Group
								mesh.position.set(23, 3.7, 2);
								// mesh.rotation.y = Math.PI - 10
								mesh.scale.set(7, 3, 9)

								scene.add( gltf.scene );


							});

							loader.load(
								// resource URL
								'./textures/carpet/scene.gltf',
								// called when the resource is loaded
								function ( gltf ) {
									var mesh = gltf.scene; // THREE.Group
									mesh.position.set(35, -1.8, 2);

									mesh.scale.set(0.4, 0.3, 0.5)

									scene.add( gltf.scene );


								});


						loader.load(
							// resource URL
							'./textures/table_ronde/scene.gltf',
							// called when the resource is loaded
							function ( gltf ) {
								var mesh = gltf.scene; // THREE.Group
								mesh.position.set(-26, 1, 1);

								mesh.scale.set(0.07, 0.07, 0.07)

								scene.add( gltf.scene );


							});


							loader.load(
								// resource URL
								'./textures/surfboard/scene.gltf',
								// called when the resource is loaded
								function ( gltf ) {
									var mesh = gltf.scene; // THREE.Group
									mesh.position.set(-10, 9, 57);
									mesh.rotation.y = Math.PI/2 ;
									mesh.rotation.x = - Math.PI/2 -3;
									mesh.scale.set(8, 8, 8)

									scene.add( gltf.scene );


								});



			let camera, scene, renderer, controls;

			const objects = [];

			let raycaster;

			let moveForward = false;
			let moveBackward = false;
			let moveLeft = false;
			let moveRight = false;
			let canJump = false;

			let prevTime = performance.now();
			const velocity = new THREE.Vector3();
			const direction = new THREE.Vector3();
			const vertex = new THREE.Vector3();
			const color = new THREE.Color();

			init();
			animate();

			function init() {

				camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.y = 10;

				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0xffffff );
				scene.fog = new THREE.Fog( 0xffffff, 0, 750 );

				const light = new THREE.HemisphereLight( 0xeeeeff, 0x777788, 0.75 );
				light.position.set( 0.5, 1, 0.75 );
				scene.add( light );

				controls = new PointerLockControls( camera, document.body );


				const instructions = document.getElementById( 'instructions' );

				instructions.addEventListener( 'click', function () {
					if (loaded === true)  {
					controls.lock();
					}
				}, false );


				controls.addEventListener( 'lock', function () {

					instructions.style.display = 'none';
					blocker.style.display = 'none';

				} );

				controls.addEventListener( 'unlock', function () {

					blocker.style.display = 'block';
					instructions.style.display = '';

				} );



				scene.add( controls.getObject() );


				const onKeyDown = function ( event ) {

					switch ( event.keyCode ) {

						case 38: // up
						case 87: // w
							moveForward = true;
							break;

						case 37: // left
						case 65: // a
							moveLeft = true;
							break;

						case 40: // down
						case 83: // s
							moveBackward = true;
							break;

						case 39: // right
						case 68: // d
							moveRight = true;
							break;

						case 32: // space
							if ( canJump === true ) velocity.y += 150;
							canJump = false;
							break;

					}

				};

				const onKeyUp = function ( event ) {

					switch ( event.keyCode ) {

						case 38: // up
						case 87: // w
							moveForward = false;
							break;

						case 37: // left
						case 65: // a
							moveLeft = false;
							break;

						case 40: // down
						case 83: // s
							moveBackward = false;
							break;

						case 39: // right
						case 68: // d
							moveRight = false;
							break;

					}

				};

				document.addEventListener( 'keydown', onKeyDown, false );
				document.addEventListener( 'keyup', onKeyUp, false );

				raycaster = new THREE.Raycaster( new THREE.Vector3(), new THREE.Vector3( 0, - 1, 0 ), 0, 10 );




				//

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				//

				window.addEventListener( 'resize', onWindowResize, false );


      //art s
		//main right photo
				 var artTexture = new THREE.TextureLoader().load( './textures/art/master.jpg' );

							 var artgeometry = new THREE.BoxBufferGeometry( 20, 40, 0 );
							 var artmaterial = new THREE.MeshBasicMaterial( { map: artTexture } );

							 var mesh1 = new THREE.Mesh( artgeometry, artmaterial );
							mesh1.scale.set(0.5,0.35,0.5)
							mesh1.position.set(100.4, 16.8, 1.84);
							mesh1.rotation.y = Math.PI / 2;
							 scene.add( mesh1 );

				//bigwall drone pic mid
				 var artTexture2 = new THREE.TextureLoader().load( './textures/art/lagos.jpg' );


							 var artmaterial2 = new THREE.MeshBasicMaterial( { map: artTexture2 } );

							 var mesh2 = new THREE.Mesh( artgeometry, artmaterial2 );
							mesh2.scale.set(0.38,0.25,0.5)
							mesh2.position.set(-34, 15, 1.5);
							mesh2.rotation.y = Math.PI / 2;
							 scene.add( mesh2 );

							 var artTexture3 = new THREE.TextureLoader().load( './textures/art/surf.jpg' );

						 var artmaterial3 = new THREE.MeshBasicMaterial( { map: artTexture3 } );

										 var mesh3 = new THREE.Mesh( artgeometry, artmaterial3 );
										mesh3.scale.set(0.38,0.25,0.5)
										mesh3.position.set(-34
											, 15, 15);
										mesh3.rotation.y = Math.PI / 2;
										 scene.add( mesh3 );
				var artTexture4 = new THREE.TextureLoader().load( './textures/art/small2.jpg' );

				var artmaterial4 = new THREE.MeshBasicMaterial( { map: artTexture4 } );

				var mesh4 = new THREE.Mesh( artgeometry, artmaterial4 );
			 mesh4.scale.set(0.38,0.25,0.5)
			 mesh4.position.set(-34, 15, -12.3);
			 mesh4.rotation.y = Math.PI / 2;
				scene.add( mesh4 );



				//behind wall

				var artTexture5 = new THREE.TextureLoader().load( './textures/art/watershot.jpg' );

				var artmaterial5 = new THREE.MeshBasicMaterial( { map: artTexture5 } );

				var mesh4 = new THREE.Mesh( artgeometry, artmaterial5 );
				 mesh4.scale.set(0.422,0.266,0.5)
				 mesh4.position.set(-2.25, 15.4, 58.49);

					scene.add( mesh4 );

					var artTexture5pair = new THREE.TextureLoader().load( './textures/art/backwallmin.jpg' );

					var artmaterial5pair = new THREE.MeshBasicMaterial( { map: artTexture5pair } );

					var mesh9 = new THREE.Mesh( artgeometry, artmaterial5pair );
					 mesh9.scale.set(0.422,0.266,0.5)
					 mesh9.position.set(20.75, 15.4, 58.49);

						scene.add( mesh9 );


					//landscape backright

					var artTexture6 = new THREE.TextureLoader().load( './textures/art/ls.jpg' );

					var artmaterial6 = new THREE.MeshBasicMaterial( { map: artTexture6 } );
					var mesh5 = new THREE.Mesh( artgeometry, artmaterial6 );
					 mesh5.scale.set(0.96,0.25,0)
					 mesh5.position.set(75, 15, 58.5);

	 				mesh5.rotation.z = 180 * Math.PI/180;

						scene.add( mesh5 );

					//big landscape
						var artTexture7 = new THREE.TextureLoader().load( './textures/art/landscape4.jpg' );

						var artmaterial7 = new THREE.MeshBasicMaterial( { map: artTexture7 } );

					var mesh6 = new THREE.Mesh( artgeometry, artmaterial7 )
						mesh6.scale.set(0.9,0.27,0)
						mesh6.position.set(79, 15, -54.3);

					 // mesh6.rotation.z = 180 * Math.PI/180;

						 scene.add( mesh6 );


					//front wall
					var artTexture8 = new THREE.TextureLoader().load( './textures/art/sunset1min.jpg' );

					var artmaterial8 = new THREE.MeshBasicMaterial( { map: artTexture8 } );

					var mesh7 = new THREE.Mesh( artgeometry, artmaterial8 )

					mesh7.scale.set(0.422,0.269,0.5)
					mesh7.position.set(4, 15, -53.9);

					 scene.add( mesh7 );

					 var artTexture9 = new THREE.TextureLoader().load( './textures/art/sunset2min.jpg' );

					 var artmaterial9 = new THREE.MeshBasicMaterial( { map: artTexture9 } );

					 var mesh8 = new THREE.Mesh( artgeometry, artmaterial9 )

					 mesh8.scale.set(0.422,0.269,0.5)
					 mesh8.position.set(15, 15, -53.9);



						scene.add( mesh8 );

				//light
		var directionalLight = new THREE.DirectionalLight(0xEED5D2, 2);
					directionalLight.position.set(0, 10, 0);
					scene.add(directionalLight)


					var spotLightBigWall1 = new THREE.SpotLight(0xF6CD8B, 2, 100);
					spotLightBigWall1.position.set( 0, 15, 15 );

					spotLightBigWall1.angle = Math.PI / 4;
					spotLightBigWall1.penumbra = 0.70;
					spotLightBigWall1.decay = 2;
					spotLightBigWall1.distance = 131;

					spotLightBigWall1.castShadow = true;
					spotLightBigWall1.shadow.mapSize.width = 512;
					spotLightBigWall1.shadow.mapSize.height = 512;
					spotLightBigWall1.shadow.camera.near = 10;
					spotLightBigWall1.shadow.camera.far = 200;
					spotLightBigWall1.shadow.focus = 0.3;
					spotLightBigWall1.target = mesh2
					scene.add(spotLightBigWall1)


				var spotLight2portrait = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLight2portrait.position.set( 80, 15, 1 );

				spotLight2portrait.angle = 0.86;
				spotLight2portrait.penumbra = 0.70;
				spotLight2portrait.decay = 2;
				spotLight2portrait.distance = 105;

				spotLight2portrait.castShadow = true;
				spotLight2portrait.shadow.mapSize.width = 512;
				spotLight2portrait.shadow.mapSize.height = 512;
				spotLight2portrait.shadow.camera.near = 10;
				spotLight2portrait.shadow.camera.far = 200;
				spotLight2portrait.shadow.focus = 0.3;
				spotLight2portrait.target = mesh1
				scene.add(spotLight2portrait)

				var spotLightWall3 = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLightWall3.position.set( 0, 15, 15 );

				spotLightWall3.angle = Math.PI / 4;
				spotLightWall3.penumbra = 0.70;
				spotLightWall3.decay = 2;
				spotLightWall3.distance = 131;

				spotLightWall3.castShadow = true;
				spotLightWall3.shadow.mapSize.width = 512;
				spotLightWall3.shadow.mapSize.height = 512;
				spotLightWall3.shadow.camera.near = 10;
				spotLightWall3.shadow.camera.far = 200;
				spotLightWall3.shadow.focus = 0.3;
				spotLightWall3.target = mesh4
				console.log(mesh4)
				scene.add(spotLightWall3)

				var spotLightWall5 = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLightWall5.position.set( 60, 15, 15 );

				spotLightWall5.angle = Math.PI / 4;
				spotLightWall5.penumbra = 0.70;
				spotLightWall5.decay = 2;
				spotLightWall5.distance = 131;

				spotLightWall5.castShadow = true;
				spotLightWall5.shadow.mapSize.width = 512;
				spotLightWall5.shadow.mapSize.height = 512;
				spotLightWall5.shadow.camera.near = 10;
				spotLightWall5.shadow.camera.far = 200;
				spotLightWall5.shadow.focus = 0.3;
				spotLightWall5.target = mesh5

				scene.add(spotLightWall5)


				var spotLightWall6 = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLightWall6.position.set( 60, 15, -15 );

				spotLightWall6.angle = Math.PI / 4;
				spotLightWall6.penumbra = 0.70;
				spotLightWall6.decay = 2;
				spotLightWall6.distance = 131;

				spotLightWall6.castShadow = true;
				spotLightWall6.shadow.mapSize.width = 512;
				spotLightWall6.shadow.mapSize.height = 512;
				spotLightWall6.shadow.camera.near = 10;
				spotLightWall6.shadow.camera.far = 200;
				spotLightWall6.shadow.focus = 0.3;
				spotLightWall6.target = mesh6

				scene.add(spotLightWall6)


				var spotLightWall7 = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLightWall7.position.set( 2, 15, -15 );

				spotLightWall7.angle = Math.PI / 4;
				spotLightWall7.penumbra = 0.70;
				spotLightWall7.decay = 2;
				spotLightWall7.distance = 131;

				spotLightWall7.castShadow = true;
				spotLightWall7.shadow.mapSize.width = 512;
				spotLightWall7.shadow.mapSize.height = 512;
				spotLightWall7.shadow.camera.near = 10;
				spotLightWall7.shadow.camera.far = 200;
				spotLightWall7.shadow.focus = 0.3;
				spotLightWall7.target = mesh8

				scene.add(spotLightWall7)

				var spotLightWall8 = new THREE.SpotLight(0xF6CD8B, 2, 100);
				spotLightWall8.position.set( 2, 15, 15 );

				spotLightWall8.angle = Math.PI / 4;
				spotLightWall8.penumbra = 0.70;
				spotLightWall8.decay = 2;
				spotLightWall8.distance = 131;

				spotLightWall8.castShadow = true;
				spotLightWall8.shadow.mapSize.width = 512;
				spotLightWall8.shadow.mapSize.height = 512;
				spotLightWall8.shadow.camera.near = 10;
				spotLightWall8.shadow.camera.far = 200;
				spotLightWall8.shadow.focus = 0.3;
				spotLightWall8.target = mesh9

				scene.add(spotLightWall8)
			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {

				requestAnimationFrame( animate );

				const time = performance.now();

				if ( controls.isLocked === true ) {

					raycaster.ray.origin.copy( controls.getObject().position );
					raycaster.ray.origin.y -= 10;

					const intersections = raycaster.intersectObjects( objects );

					const onObject = intersections.length > 0;

					const delta = ( time - prevTime ) / 1000;

					velocity.x -= velocity.x * 10.0 * delta;
					velocity.z -= velocity.z * 10.0 * delta;

					velocity.y -= 9.8 * 100.0 * delta; // 100.0 = mass

					direction.z = Number( moveForward ) - Number( moveBackward );
					direction.x = Number( moveRight ) - Number( moveLeft );
					direction.normalize(); // this ensures consistent movements in all directions

					if ( moveForward || moveBackward ) velocity.z -= direction.z * 250.0 * delta;
					if ( moveLeft || moveRight ) velocity.x -= direction.x * 250.0 * delta;
					if (velocity.x > 40.0) {
						velocity.x = 0
					}
					if (velocity.y > 40.0) {
						velocity.y = 0
					}
					if (velocity.z > 40.0) {
						velocity.z = 0
					}
					if ( onObject === true ) {

						velocity.y = Math.max( 0, velocity.y );
						canJump = true;

					}

					controls.moveRight( - velocity.x * delta );
					controls.moveForward( - velocity.z * delta );

					controls.getObject().position.y += ( velocity.y * delta ); // new behavior

					if ( controls.getObject().position.y < 10 ) {

						velocity.y = 0;
						controls.getObject().position.y = 10;

						canJump = true;

					}

				}

				prevTime = time;

				renderer.render( scene, camera );

			}



		</script>
	</body>
</html>
